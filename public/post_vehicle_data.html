<!DOCTYPE html>
<html>
    <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

      <!-- vehicle api 必須 : ここから-->
      <script src="http://52.193.125.145:3000/socket.io/socket.io.js"></script> 
      <script src="http://52.193.125.145:3000/www/js/vehicleAPI.js"></script>
      <script src="http://52.193.125.145:3000/www/js/vehicleAPI-client.js"></script>
      <script>
        var roomID = "cherassco";

        window.onload = function () {
          document.getElementById("WSRoomID").innerHTML = roomID;
          var msg = {"roomID":roomID, "data":"NOT REQUIRED"};
          socket.emit('joinRoom', JSON.stringify(msg));        
        }
      </script>
      <!-- vehicle api 必須 : ここまで -->

      <script>
        var vehicle_data = {
          vehicle_speed: 100,
          engine_speed: 100,
          acceleration_x: 100,
          acceleration_y: 100,
          acceleration_z: 100,
          gyro_x: 100,
          gyro_y: 100,
          gyro_z: 100,
          steering_wheel: 100,
          latitude: 100,
          longitude: 100,
          altitude: 100,
          gps_heading: 100,
          gps_speed: 100
        };

        var vehicle_datas = [];

        var vehicleSpeedSub = navigator.vehicle.vehicleSpeed.subscribe(function(vehicleSpeed) {
          vehicle_data.vehicle_speed = vehicleSpeed.speed;
          document.getElementById("VehicleSpeed").innerHTML = Math.floor(vehicleSpeed.speed /1000);
        });

        setInterval(function(){
          vehicle_datas.push(vehicle_data);
          if( vehicle_datas.length == 10 ){
            // TODO: post
            console.log(vehicle_datas);
            vehicle_datas = [];
          }
        },500);

      </script>
    </head>
    <body>
      <div>
        Room ID:<span id="WSRoomID"> </span>
      </div>
      <div>
        VehicleSpeed:<span id="VehicleSpeed"> </span> [km/h]
      </div>
    </body>
</html>
